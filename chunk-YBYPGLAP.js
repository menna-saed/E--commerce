import{b as E,c as a,d as F,e as V,j as G,k as N,m as T,o as R,q as M,r as z}from"./chunk-ZSFQ7NLB.js";import{c as S,g as P}from"./chunk-HFNP73FD.js";import{l as k}from"./chunk-7O4D4VKI.js";import{$a as r,Ha as h,Ua as _,Va as C,X as p,Za as x,_a as e,aa as u,ab as l,ba as f,ca as v,da as y,gb as b,jb as g,lb as m,ub as w,xa as d,xb as o}from"./chunk-Y5WUEYWX.js";import"./chunk-4CLCTAJ7.js";function j(n,i){if(n&1){let t=b();e(0,"form",8)(1,"div",9),l(2,"input",10),e(3,"label",11),o(4,"Email "),r(),e(5,"button",12),g("click",function(){u(t);let c=m();return f(c.Step1_verifyEmail())}),o(6,"Verify Email"),r()()()}if(n&2){let t=m();x("formGroup",t.verifyEmail)}}function q(n,i){if(n&1){let t=b();e(0,"form",8)(1,"div",9),l(2,"input",13),e(3,"label",14),o(4,"reset Code "),r(),e(5,"button",12),g("click",function(){u(t);let c=m();return f(c.Step2_verifyCode())}),o(6,"Verify Code"),r()()()}if(n&2){let t=m();x("formGroup",t.verifyPass)}}function I(n,i){if(n&1){let t=b();e(0,"form",8)(1,"div",9),l(2,"input",10),e(3,"label",11),o(4,"Email "),r()(),e(5,"div",9),l(6,"input",15),e(7,"label",16),o(8,"new password "),r()(),e(9,"button",17),g("click",function(){u(t);let c=m();return f(c.Step3_newPassword())}),o(10,"Reset Password"),r()()}if(n&2){let t=m();x("formGroup",t.ResetPass)}}var D=class n{fb=p(R);authService=p(z);cookieService=p(P);toastrService=p(k);router=p(S);verifyEmail;verifyPass;ResetPass;step=1;ngOnInit(){this.initForm()}initForm(){this.verifyEmail=this.fb.group({email:[null,[a.required,a.email]]}),this.verifyPass=this.fb.group({resetCode:[null,[a.required]]}),this.ResetPass=this.fb.group({email:[null,[a.required,a.email]],newPassword:[null,[a.required,a.pattern(/^((?=\S*?[A-Z])(?=\S*?[a-z])(?=\S*?[0-9]).{6,})\S$/)]]})}Step1_verifyEmail(){this.verifyEmail.valid&&this.authService.verifyEmail(this.verifyEmail.value).subscribe({next:i=>{console.log(i),this.toastrService.success(i.message),this.step=2}})}Step2_verifyCode(){this.verifyPass.valid&&this.authService.verifyCode(this.verifyPass.value).subscribe({next:i=>{console.log(i),this.step=3}})}Step3_newPassword(){this.ResetPass.valid&&this.authService.resetPassword(this.ResetPass.value).subscribe({next:i=>{console.log(i),this.cookieService.set("token",i.token),this.router.navigate(["/home"])}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=h({type:n,selectors:[["app-forgotPassword"]],decls:23,vars:7,consts:[[1,"section","mt-25","mb-20"],[1,"text-center","text-blue-900","font-bold","text-4xl","pb-10","pt-3"],[1,"max-w-lg","mx-auto","flex","items-center","w-full","p-3","space-x-2","text-sm","font-medium","text-center","text-gray-500","bg-white","border","border-gray-200","rounded-lg","shadow-xs","dark:text-gray-400","sm:text-base","dark:bg-gray-800","dark:border-gray-700","sm:p-4","sm:space-x-4","rtl:space-x-reverse"],[1,"flex","items-center"],[1,"flex","items-center","justify-center","w-5","h-5","me-2","text-xs","border","border-blue-600","rounded-full","shrink-0","dark:border-blue-500"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",1,"w-3","h-3","ms-2","sm:ms-4","rtl:rotate-180"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m7 9 4-4-4-4M1 9l4-4-4-4"],[1,"flex","items-center","justify-center","w-5","h-5","me-2","text-xs","border","border-gray-500","rounded-full","shrink-0","dark:border-gray-400"],[1,"max-w-lg","mx-auto",3,"formGroup"],[1,"relative","z-0","w-full","mb-6","group"],["formControlName","email","type","email","name","floating_email","id","email","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","email",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"btn","mt-10",3,"click"],["formControlName","resetCode","type","text","name","floating_pass","id","password","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","resetCode",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formControlName","newPassword","type","password","name","floating_password","id","newPassword","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","newPassword",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"btn","mt-5",3,"click"]],template:function(t,s){t&1&&(e(0,"div",0)(1,"h2",1),o(2,"Reset Password"),r(),e(3,"ol",2)(4,"li",3)(5,"span",4),o(6," 1 "),r(),o(7," Verify Email "),v(),e(8,"svg",5),l(9,"path",6),r()(),y(),e(10,"li",3)(11,"span",7),o(12," 2 "),r(),o(13," reset Code "),v(),e(14,"svg",5),l(15,"path",6),r()(),y(),e(16,"li",3)(17,"span",7),o(18," 3 "),r(),o(19," reset Password "),r()(),_(20,j,7,1,"form",8)(21,q,7,1,"form",8)(22,I,11,1,"form",8),r()),t&2&&(d(4),w("text-blue-600",s.step===1),d(6),w("text-blue-600",s.step===2),d(6),w("text-blue-600",s.step===3),d(4),C(s.step===1?20:s.step===2?21:s.step===3?22:-1))},dependencies:[M,G,E,F,V,N,T],encapsulation:2})};export{D as ForgotPasswordComponent};
